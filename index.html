<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êï¨ÊãúÊ≠åÊõ≤Â∫ì - Âú®Á∫øÊí≠ÊîæÂô®</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>üéµ Êï¨ÊãúÊ≠åÊõ≤Â∫ì</h1>
        </header>
        
        <main class="app-main player-collapsed" id="appMain">
            <!-- Ê≠åÊõ≤ÂàóË°®Âå∫Âüü -->
            <section class="songs-section">
                <h2>Ê≠åÊõ≤ÂàóË°®</h2>
                <div class="search-box">
                    <div class="search-input-container">
                        <input type="text" id="searchInput" placeholder="ÊêúÁ¥¢Ê≠åÊõ≤...">
                        <button id="clearSearchBtn" class="clear-search-btn" title="Ê∏ÖÈô§ÊêúÁ¥¢">√ó</button>
                    </div>
                </div>
                <div class="songs-list" id="songsList">
                    <!-- Ê≠åÊõ≤È°πÁõÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
                </div>
            </section>
            
            <!-- Êí≠ÊîæÂô®Âå∫Âüü -->
            <section class="player-section collapsed" id="playerSection">
                <button id="playerToggleBtn" class="player-toggle-btn" title="Êî∂Ëµ∑Êí≠ÊîæÂô®">
                    <span id="playerToggleText">ÊäòÂè†</span><span id="playerToggleIcon">üîº</span>
                </button>
                
                <!-- ÂßãÁªàÂèØËßÅÁöÑÊí≠ÊîæÊéßÂà∂Âå∫Âüü -->
                <div class="player-controls-always-visible">
                    <!-- Èü≥È¢ëÊéßÂà∂Âô® -->
                    <div class="audio-controls">
                        <div class="audio-player">
                            <audio id="audioPlayer" preload="none">
                                ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅÈü≥È¢ëÊí≠Êîæ„ÄÇ
                            </audio>
                            
                            <div class="control-buttons">
                                <div class="audio-and-mode-buttons">
                                    <button id="originalBtn" class="audio-btn active" disabled>
                                        üé§ ÂéüÂî±
                                    </button>
                                    <button id="accompanimentBtn" class="audio-btn" disabled>
                                        üéπ ‰º¥Â•è
                                    </button>
                                    <button id="playModeBtn" class="mode-btn" title="Êí≠ÊîæÊ®°Âºè">
                                        üîÑ È°∫Â∫èÊí≠Êîæ
                                    </button>
                                </div>
                                <div class="playback-controls">
                                    <div class="navigation-buttons">
                                        <button id="prevBtn" class="nav-btn" disabled title="‰∏ä‰∏ÄÈ¶ñ">
                                            ‚èÆÔ∏è
                                        </button>
                                        <button id="playPauseBtn" class="nav-btn play-pause" disabled title="Êí≠Êîæ/ÊöÇÂÅú">
                                            ‚ñ∂Ô∏è
                                        </button>
                                        <button id="nextBtn" class="nav-btn" disabled title="‰∏ã‰∏ÄÈ¶ñ">
                                            ‚è≠Ô∏è
                                        </button>
                                    </div>
                                    <div class="volume-control">
                                        <span>üîä</span>
                                        <input type="range" id="volumeSlider" min="0" max="100" value="100">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="progress-container">
                                <div class="time-display">
                                    <span id="currentTime">00:00</span>
                                    <span id="duration">00:00</span>
                                </div>
                                <div class="progress-bar">
                                    <input type="range" id="progressSlider" min="0" max="100" value="0">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ÂèØÊäòÂè†ÁöÑÊ≠åË∞±Âíå‰∏ãËΩΩÂå∫Âüü -->
                <div class="player-collapsible-content" id="playerCollapsibleContent">
                    <!-- Ê≠åË∞±ÊòæÁ§∫Âå∫Âüü -->
                    <div class="sheet-music">
                        <div class="sheet-header">
                            <div class="download-controls">
                                <button id="downloadZipBtn" class="action-btn" disabled>ÊâìÂåÖ‰∏ãËΩΩ</button>
                                <button id="downloadOriginalBtn" class="action-btn" disabled>üé§ Ê≠åÊõ≤</button>
                                <button id="downloadAccompanimentBtn" class="action-btn" disabled>üéπ ‰º¥Â•è</button>
                                <button id="downloadSheetBtn" class="action-btn" disabled>üéº Ê≠åË∞±</button>
                            </div>
                        </div>
                        <div class="sheet-display" id="sheetDisplay">
                            <div class="sheet-placeholder">
                                <p>üéº</p>
                                <p>ËØ∑ÈÄâÊã©Ê≠åÊõ≤Êü•ÁúãÊ≠åË∞±</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-content">
                <div class="spinner"></div>
                <p>Ê≠£Âú®Âä†ËΩΩ...</p>
            </div>
        </div>
        
        <!-- ÈîôËØØÊèêÁ§∫ -->
        <div class="error-toast" id="errorToast" style="display: none;">
            <span id="errorMessage"></span>
            <button onclick="hideError()">√ó</button>
        </div>
    </div>
    
    <!-- ÂÖ®Â±èÊ≠åË∞±Êü•ÁúãÂô® -->
    <div id="sheetModal" class="sheet-modal">
        <span class="close-modal" id="closeSheetModal">&times;</span>
        <img class="sheet-modal-content" id="modalSheetImage">
    </div>

    <!-- ÂºïÂÖ•Â∫ìÊñá‰ª∂ÂíåËÑöÊú¨ -->
    <script src="https://cdn.jsdelivr.net/npm/pinyin-pro/dist/pinyin-pro.umd.js"></script>
    <script src="libs/jszip.min.js"></script>
    <script src="scripts.js"></script>
</body>
</html> 