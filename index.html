<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>敬拜歌曲库 - 在线播放器</title>
    <link rel="stylesheet" href="styles.css">
<<<<<<< HEAD
    <!-- 配置R2绑定后触发重新部署 -->
=======
>>>>>>> d2bffa7e018efbef8d2f9e49f696c21be25b9c68
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>🎵 敬拜歌曲库</h1>
        </header>
        
        <main class="app-main" id="appMain">
            <!-- 歌曲列表区域 -->
            <section class="songs-section">
                <h2>歌曲列表</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="搜索歌曲...">
                </div>
                <div class="songs-list" id="songsList">
                    <!-- 歌曲项目将通过JavaScript动态加载 -->
                </div>
            </section>
            
            <!-- 播放器区域 -->
            <section class="player-section" id="playerSection">
                <button id="playerToggleBtn" class="player-toggle-btn" title="收起播放器">
                    <span id="playerToggleText">折叠</span><span id="playerToggleIcon">🔼</span>
                </button>
                <!-- 音频控制器 -->
                <div class="audio-controls">
                    <div class="audio-player">
                        <audio id="audioPlayer" preload="none">
                            您的浏览器不支持音频播放。
                        </audio>
                        
                        <div class="control-buttons">
                            <div class="audio-and-mode-buttons">
                                <button id="originalBtn" class="audio-btn active" disabled>
                                    🎤 原唱
                                </button>
                                <button id="accompanimentBtn" class="audio-btn" disabled>
                                    🎹 伴奏
                                </button>
                                <button id="playModeBtn" class="mode-btn" title="播放模式">
                                    🔄 顺序播放
                                </button>
                            </div>
                            <div class="playback-controls">
                                <div class="navigation-buttons">
                                    <button id="prevBtn" class="nav-btn" disabled title="上一首">
                                        ⏮️
                                    </button>
                                    <button id="playPauseBtn" class="nav-btn play-pause" disabled title="播放/暂停">
                                        ▶️
                                    </button>
                                    <button id="nextBtn" class="nav-btn" disabled title="下一首">
                                        ⏭️
                                    </button>
                                </div>
                                <div class="volume-control">
                                    <span>🔊</span>
                                    <input type="range" id="volumeSlider" min="0" max="100" value="70">
                                </div>
                            </div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="time-display">
                                <span id="currentTime">00:00</span>
                                <span id="duration">00:00</span>
                            </div>
                            <div class="progress-bar">
                                <input type="range" id="progressSlider" min="0" max="100" value="0">
                            </div>
                        </div>
                        

                    </div>
                </div>
                
                <!-- 歌谱显示区域 -->
                <div class="sheet-music">
                    <div class="sheet-header">
                        <div class="download-controls">
                            <button id="downloadZipBtn" class="action-btn" disabled>打包下载</button>
                            <button id="downloadOriginalBtn" class="action-btn" disabled>🎤 歌曲</button>
                            <button id="downloadAccompanimentBtn" class="action-btn" disabled>🎹 伴奏</button>
                            <button id="downloadSheetBtn" class="action-btn" disabled>🎼 歌谱</button>
                        </div>
                    </div>
                    <div class="sheet-display" id="sheetDisplay">
                        <div class="sheet-placeholder">
                            <p>🎼</p>
                            <p>请选择歌曲查看歌谱</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- 加载状态 -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-content">
                <div class="spinner"></div>
                <p>正在加载...</p>
            </div>
        </div>
        
        <!-- 错误提示 -->
        <div class="error-toast" id="errorToast" style="display: none;">
            <span id="errorMessage"></span>
            <button onclick="hideError()">×</button>
        </div>
    </div>
    
    <!-- 引入库文件和脚本 -->
    <script src="https://cdn.jsdelivr.net/npm/pinyin-pro/dist/pinyin-pro.umd.js"></script>
    <script src="libs/jszip.min.js"></script>
    <script src="scripts.js"></script>
</body>
</html> 